Контрольные вопросы
1. Назовите подсистемы, из которых состоит микроконтроллер NXP
LPC2368.

Микроконтроллер состоит из следующих подсистем:
• Микропроцессорное ядро ARM7TDMI, выполняющее вычислительные
функции, а также управляющее работой многочисленных периферийных
устройств.
• Внутренняя память типа SRAM для хранения результатов вычислений и
FLASH-память для долговременного хранения как данных, так и
программ функционирования микроконтроллера.
• Иерархическая система шин и мостов, объединяющих модули в единую
систему на кристалле. Обмен информацией между микропроцессорным
ядром и памятью осуществляется по локальной шине ARM7. Шина AHB
служит для подключения быстродействующих периферийных устройств
(Ethernet, USB), контроллера внешней памяти, а также векторного
контроллера прерываний (VIC). Периферийная шина APB работает на
меньшей частоте и служит для подключения остальных периферийных
модулей.
• Системные сервисные блоки, обеспечивающие работу системы. К ним
относятся: встроенный осциллятор и модуль фазовой автоподстойки
частоты (PLL) для формирования тактовых сигналов системы, модуль
управления электропитанием, модуль прямого доступа в память
(GPDMA), векторный контроллер прерываний (VIC). Для отладки
программ функционирования микроконтроллера реализованы модуль
пошаговой трассировки и интерфейс JTAG.
• Периферийные модули общего назначения, состав которых для разных
моделей микроконтроллеров может различаться. В микроконтроллер NXP
LPC2368 входят: порты ввода/вывода (GPIO), модуль внешних
прерываний, четыре таймера с функциями захвата и совпадения (Timer0,
Timer1, Timer2, Timer3), два модуля широтно-импульсной модуляции
(PWM0, PWM1), 10-разрядные модули АЦП и ЦАП, контроллер
ЖК-дисплея, часы реального времени, сторожевой таймер, контроллеры
последовательных интерфейсов Ethernet, USB2.0, UART, CAN, SPI, SSP,
I2C, I2S.


2. В чем отличие между наборами командами THUMB и ARM.

Набор THUMB удобен для создания
компактных программ, так как позволяет сократить размер исполняемого кода
примерно на 30%, однако приводит к некоторому замедлению обработки
(примерно на 40%). При этом возможно выполнять быстрое переключение
между двумя наборами по команде BX (см. приложение 3). При возникновении
исключительной ситуации процессор автоматически переключается к обработке
ARM команд. 
Команды THUMB набора являются 16-разрядными и не могут быть
условными, а количество операндов в таких командах ограничено двумя.

3. Перечислите внутренние шины микроконтроллера и опишите их
назначение.

Обмен информацией между микропроцессорным
ядром и памятью осуществляется по локальной шине ARM7. Шина AHB
служит для подключения быстродействующих периферийных устройств
(Ethernet, USB), контроллера внешней памяти, а также векторного
контроллера прерываний (VIC). Периферийная шина APB работает на
меньшей частоте и служит для подключения остальных периферийных
модулей.


4. Перечислите регистры модуля GPIO и их назначение. pinsel0 = 0;

Модуль позволяет задавать режим работы для каждого разряда
порта с помощью 32-разрядных регистров направления IODIRx (регистр
IODIR0 для порта 0, регистр IODIR1 для порта 1 и т.д.). Запись нуля в
какой-либо разряд регистра IODIRx конфигурирует соответствующий разряд
порта на режим «ввод», а запись единицы на режим «вывод».
В режиме «вывод» используются регистр сброса порта IOCLRx и регистр
установки порта IOSETx, изменяющие состояние выводов порта при записи
единичных значений. Например, при записи в регистр IOCLR0 значения
0x00000002 уровень сигнала на контакте микросхемы Port0.1 будет установлен
в состояние логического нуля (при условии правильной настройки модуля
управления выводами и регистра IODIR0). Остальные выходы не изменят
своего состояния. При записи значения 0x00000003 в регистр IOSET0 уровень
сигнала на контактах микросхемы Port0.1 и Port0.0 будет установлен в
состояние логической единицы. Остальные выходы также не изменят своего
состояния.
В режиме «ввод» состояние контакта микросхемы сохраняется в каждом
такте шины APB и может быть прочитано из регистра IOPINx.